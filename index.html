<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Running Gel Calculator</title>
    <!-- Use Tailwind CSS for a sleek, modern look -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 flex items-center justify-center min-h-screen p-4">
    <div class="bg-gray-800 p-8 rounded-2xl shadow-xl max-w-lg w-full">
        <!-- Main title and description -->
        <h1 class="text-3xl font-bold text-center text-teal-400 mb-2">Marathon Fuel Calculator</h1>
        <p class="text-center text-gray-400 mb-8">
            Enter your target carbohydrate amount and get the perfect running gel recipe, scaled to your needs.
        </p>

        <!-- Input section -->
        <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4 mb-8">
            <div class="w-full">
                <label for="carbs-input" class="block text-sm font-medium text-gray-300 mb-1">
                    Target Carbs (grams)
                </label>
                <input type="number" id="carbs-input" placeholder="e.g., 60"
                       class="w-full bg-gray-700 text-white border-none focus:ring-2 focus:ring-teal-500 rounded-lg py-2.5 px-4 shadow-sm">
            </div>
            <button id="calculate-btn"
                    class="w-full md:w-auto bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2.5 px-6 rounded-lg shadow-md transition-colors duration-200 ease-in-out transform hover:scale-105 active:scale-95">
                Calculate Recipe
            </button>
        </div>

        <!-- Recipe output section -->
        <div id="recipe-output" class="hidden">
            <h2 class="text-xl font-bold text-center text-gray-200 mb-4">Your Custom Gel Recipe</h2>
            <div id="ingredient-list" class="space-y-3">
                <!-- Ingredients will be dynamically added here -->
            </div>
            <p id="total-carbs-output" class="text-sm text-gray-400 text-center mt-6"></p>
        </div>

        <!-- Error message section -->
        <div id="error-message" class="text-red-400 text-sm text-center mt-4 hidden">
            Please enter a valid number for the target carbs.
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const carbsInput = document.getElementById('carbs-input');
            const calculateBtn = document.getElementById('calculate-btn');
            const recipeOutput = document.getElementById('recipe-output');
            const ingredientList = document.getElementById('ingredient-list');
            const totalCarbsOutput = document.getElementById('total-carbs-output');
            const errorMessage = document.getElementById('error-message');

            // Original recipe data based on the provided CSV file
            // Total Carbs in the base recipe: 156.23g
            const baseRecipe = {
                'Maltodextrin': { weight: 96, carbs: 89.6 },
                'Fructose': { weight: 64, carbs: 64 },
                'Pectin': { weight: 2.5, carbs: 2.25 },
                'Sodium Alginate': { weight: 2, carbs: 0.38 },
                'Water': { weight: 110, carbs: 0 }
            };

            const totalBaseCarbs = 156.23;

            calculateBtn.addEventListener('click', () => {
                const targetCarbs = parseFloat(carbsInput.value);

                // Validation to ensure a valid number is entered
                if (isNaN(targetCarbs) || targetCarbs <= 0) {
                    errorMessage.classList.remove('hidden');
                    recipeOutput.classList.add('hidden');
                    return;
                }

                // Hide error message on successful input
                errorMessage.classList.add('hidden');
                
                // Calculate the scaling factor
                const scaleFactor = targetCarbs / totalBaseCarbs;

                // Clear previous results
                ingredientList.innerHTML = '';

                // Calculate and display new ingredient amounts
                for (const ingredient in baseRecipe) {
                    if (baseRecipe.hasOwnProperty(ingredient)) {
                        const newWeight = baseRecipe[ingredient].weight * scaleFactor;
                        const itemDiv = document.createElement('div');
                        itemDiv.className = 'flex justify-between items-center bg-gray-700 rounded-lg p-3 shadow';
                        itemDiv.innerHTML = `
                            <span class="text-gray-300">${ingredient}:</span>
                            <span class="text-lg font-semibold text-teal-300">
                                ${newWeight.toFixed(2)} g
                            </span>
                        `;
                        ingredientList.appendChild(itemDiv);
                    }
                }

                // Display the final total carbs and make the output section visible
                totalCarbsOutput.textContent = `Recipe scaled for a total of ${targetCarbs.toFixed(2)} grams of carbs.`;
                recipeOutput.classList.remove('hidden');
            });
        });
    </script>
</body>
</html>
